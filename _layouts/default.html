<!DOCTYPE html>
<html lang="en">
<head>
  <meta property="og:title" content="Mohammad Khoddami" />
  <meta property="og:url" content="https://mohammad007kh.github.io" />
  <meta property="og:site_name" content="Mohammad Khoddami"/>
  <meta property="og:description" content="AI Engineer and LLM Architect. Portfolio, resume, and projects." />
  <meta name="description" content="Mohammad Khoddami — Generative AI Engineer & LLM Architect. Portfolio, resume, projects, and case studies." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" type="image/x-icon" href="https://avatars0.githubusercontent.com/u/42774761?s=460&u=74f7510520f0797d58e6b362ad566b89cef71023&v=4" />
  <title>{% if page.title %}{{ page.title }} – {% endif %}{{ site.name }}</title>

  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Bootstrap core (for layout utilities) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Main CSS -->
  <link rel="stylesheet" href="{{ site.baseurl }}/style.css">

  <!-- Theme color for mobile -->
  <meta name="theme-color" content="#0b1220" id="meta-theme-color">

  <!-- Any included meta or analytics -->
  {% include meta.html %}
  {% include analytics.html %}
</head>
<body class="theme-dark">
  <!-- Header -->
  <div class="wrapper-masthead">
    <div class="container">
      <header class="masthead clearfix">
        <a href="{{ site.baseurl }}/" class="site-avatar" aria-label="Home">
          <img src="{{ site.avatar }}" alt="{{ site.name }} avatar" />
        </a>

        <div class="site-info">
          <h1 class="site-name">
            <a href="{{ site.baseurl }}/" aria-label="Home">{{ site.name }}</a>
          </h1>
          <p class="site-description">{{ site.description }}</p>
        </div>

        <nav class="mast-nav" role="navigation" aria-label="Main navigation">
          <a href="{{ site.baseurl }}/about" {% if page.url == '/about' %}class="active"{% endif %}>About</a>
          <a href="{{ site.baseurl }}/Blog-Posts/" {% if page.url contains 'Blog-Posts' %}class="active"{% endif %}>Blog</a>
          <a href="{{ site.baseurl }}/#projects">Projects</a>
          <a href="{{ site.baseurl }}/resume.pdf" aria-label="Resume" target="_blank">Resume</a>
          <a href="mailto:khoddami.mohammad007@gmail.com" aria-label="Contact">Contact</a>
        </nav>

        <!-- Theme toggle placed in header-right -->
        <div class="header-actions" id="header-actions">
          <div class="theme-toggle" id="theme-toggle" role="switch" aria-checked="true" tabindex="0" aria-label="Toggle dark / light theme">
            <i class="fa-solid fa-moon"></i>
            <i class="fa-solid fa-sun"></i>
            <span class="tgl-knob" aria-hidden="true"></span>
          </div>
        </div>

      </header>
    </div>
  </div>

  <!-- Main Content -->
  <div id="main" role="main" class="container">
    {{ content }}
  </div>

  <!-- Footer -->
  <div class="wrapper-footer">
    <div class="container">
      <footer class="footer">
        <div class="mb-3 social-links">
          <a href="https://github.com/mohammad007kh" class="me-2" aria-label="GitHub">
            <i class="fab fa-github fa-lg"></i>
          </a>
          <a href="https://linkedin.com/in/mohammad007kh" class="me-2" aria-label="LinkedIn">
            <i class="fab fa-linkedin fa-lg"></i>
          </a>
          <a href="mailto:khoddami.mohammad007@gmail.com" aria-label="Email">
            <i class="fas fa-envelope fa-lg"></i>
          </a>
        </div>

        <div class="footer-tagline mb-2">Built with ❤️ using Jekyll, Bootstrap, and a bit of AI</div>

        <div class="mt-2 small text-muted"> &copy; {{ "now" | date: "%Y" }} Mohammad Khoddami. All rights reserved.</div>
      </footer>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
  // THEME TOGGLE (persisting)
  (function() {
    const root = document.documentElement;
    const body = document.body;
    const toggle = document.getElementById('theme-toggle');
    const metaTheme = document.getElementById('meta-theme-color');

    function setTheme(theme) {
      if (theme === 'dark') {
        body.classList.remove('theme-light');
        body.classList.add('theme-dark');
        toggle.setAttribute('aria-checked', 'true');
        metaTheme.setAttribute('content', '#0b1220');
      } else {
        body.classList.remove('theme-dark');
        body.classList.add('theme-light');
        toggle.setAttribute('aria-checked', 'false');
        metaTheme.setAttribute('content', '#ffffff');
      }
      localStorage.setItem('site-theme', theme);
    }

    // init
    const saved = localStorage.getItem('site-theme') || 'dark';
    setTheme(saved);

    function toggleTheme() {
      const current = body.classList.contains('theme-dark') ? 'dark' : 'light';
      setTheme(current === 'dark' ? 'light' : 'dark');
      // subtle animation
      document.documentElement.style.transition = 'background-color 300ms ease-in-out, color 300ms ease-in-out';
      window.setTimeout(() => document.documentElement.style.transition = '', 400);
    }

    toggle.addEventListener('click', toggleTheme);
    toggle.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleTheme(); }});
  })();

  // Skill bars: on scroll animate width
  (function() {
    const skillCards = document.querySelectorAll('.skill-card');
    if (!skillCards.length) return;
    const io = new IntersectionObserver((entries) => {
      entries.forEach(ent => {
        if (ent.isIntersecting) {
          const bar = ent.target.querySelector('.skill-bar span');
          const val = Number(ent.target.getAttribute('data-value')) || 80;
          bar.style.width = val + '%';
          ent.target.classList.add('active');
        }
      });
    }, { threshold: 0.25 });
    skillCards.forEach(c => io.observe(c));
  })();

  // Project filters
  (function() {
    const buttons = document.querySelectorAll('.filter-btn');
    const cards = document.querySelectorAll('.project-card');

    function setFilter(filter) {
      buttons.forEach(b => b.classList.toggle('active', b.getAttribute('data-filter') === filter));
      cards.forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').split(',');
        if (filter === 'all' || tags.includes(filter)) {
          card.style.display = 'block';
          requestAnimationFrame(() => card.classList.add('visible'));
        } else {
          card.classList.remove('visible');
          setTimeout(() => card.style.display = 'none', 220);
        }
      });
    }

    buttons.forEach(b => {
      b.addEventListener('click', () => setFilter(b.getAttribute('data-filter')));
      b.addEventListener('keydown', (e) => { if (e.key === 'Enter') b.click(); });
    });

    // init
    setFilter('all');
  })();

  // Experience reveal
  (function() {
    const rows = document.querySelectorAll('.timeline-row');
    if (!rows.length) return;
    const io = new IntersectionObserver((entries) => {
      entries.forEach(ent => {
        if (ent.isIntersecting) ent.target.classList.add('visible');
      });
    }, { threshold: 0.2 });
    rows.forEach(r => io.observe(r));
  })();
  </script>

</body>
</html>
